#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/time.h>

#include "Generic/step.h"
#include "Controllers/Generated/Controller1.h"
#include "Controllers/Generated/Controller2.h"
#include "Controllers/Generated/Controller3.h"
#include "Controllers/Generated/Controller4.h"
#include "Controllers/Generated/Controller5.h"
#include "Controllers/Generated/Controller6.h"
#include "Controllers/Generated/Controller7.h"
#include "Controllers/Generated/Controller8.h"
#include "Controllers/Generated/Controller9.h"
#include "Controllers/Generated/Controller10.h"
#include "Controllers/Generated/Controller11.h"
#include "Controllers/Generated/Controller12.h"
#include "Controllers/Generated/Controller13.h"
#include "Controllers/Generated/Controller14.h"
#include "Controllers/Generated/Controller15.h"
#include "Controllers/Generated/Controller16.h"
#include "Controllers/Generated/Controller17.h"
#include "Controllers/Generated/Controller18.h"
#include "Controllers/Generated/Controller19.h"
#include "Controllers/Generated/Controller20.h"
#include "Controllers/Generated/Controller21.h"
#include "Controllers/Generated/Controller22.h"
#include "Controllers/Generated/Controller23.h"
#include "Controllers/Generated/Controller24.h"
#include "Controllers/Generated/Controller25.h"
#include "Controllers/Generated/Controller26.h"
#include "Controllers/Generated/Controller27.h"
#include "Controllers/Generated/Controller28.h"
#include "Controllers/Generated/Controller29.h"
#include "Controllers/Generated/Controller30.h"
#include "Plants/Generated/Plant1.h"
#include "Plants/Generated/Plant2.h"
#include "Plants/Generated/Plant3.h"
#include "Plants/Generated/Plant4.h"
#include "Plants/Generated/Plant5.h"
#include "Plants/Generated/Plant6.h"
#include "Plants/Generated/Plant7.h"
#include "Plants/Generated/Plant8.h"
#include "Plants/Generated/Plant9.h"
#include "Plants/Generated/Plant10.h"
#include "Plants/Generated/Plant11.h"
#include "Plants/Generated/Plant12.h"
#include "Plants/Generated/Plant13.h"
#include "Plants/Generated/Plant14.h"
#include "Plants/Generated/Plant15.h"
#include "Plants/Generated/Plant16.h"
#include "Plants/Generated/Plant17.h"
#include "Plants/Generated/Plant18.h"
#include "Plants/Generated/Plant19.h"
#include "Plants/Generated/Plant20.h"
#include "Plants/Generated/Plant21.h"
#include "Plants/Generated/Plant22.h"
#include "Plants/Generated/Plant23.h"
#include "Plants/Generated/Plant24.h"
#include "Plants/Generated/Plant25.h"
#include "Plants/Generated/Plant26.h"
#include "Plants/Generated/Plant27.h"
#include "Plants/Generated/Plant28.h"
#include "Plants/Generated/Plant29.h"
#include "Plants/Generated/Plant30.h"

Controller1 Controller1_data;
Controller2 Controller2_data;
Controller3 Controller3_data;
Controller4 Controller4_data;
Controller5 Controller5_data;
Controller6 Controller6_data;
Controller7 Controller7_data;
Controller8 Controller8_data;
Controller9 Controller9_data;
Controller10 Controller10_data;
Controller11 Controller11_data;
Controller12 Controller12_data;
Controller13 Controller13_data;
Controller14 Controller14_data;
Controller15 Controller15_data;
Controller16 Controller16_data;
Controller17 Controller17_data;
Controller18 Controller18_data;
Controller19 Controller19_data;
Controller20 Controller20_data;
Controller21 Controller21_data;
Controller22 Controller22_data;
Controller23 Controller23_data;
Controller24 Controller24_data;
Controller25 Controller25_data;
Controller26 Controller26_data;
Controller27 Controller27_data;
Controller28 Controller28_data;
Controller29 Controller29_data;
Controller30 Controller30_data;
Plant1 Plant1_data;
Plant2 Plant2_data;
Plant3 Plant3_data;
Plant4 Plant4_data;
Plant5 Plant5_data;
Plant6 Plant6_data;
Plant7 Plant7_data;
Plant8 Plant8_data;
Plant9 Plant9_data;
Plant10 Plant10_data;
Plant11 Plant11_data;
Plant12 Plant12_data;
Plant13 Plant13_data;
Plant14 Plant14_data;
Plant15 Plant15_data;
Plant16 Plant16_data;
Plant17 Plant17_data;
Plant18 Plant18_data;
Plant19 Plant19_data;
Plant20 Plant20_data;
Plant21 Plant21_data;
Plant22 Plant22_data;
Plant23 Plant23_data;
Plant24 Plant24_data;
Plant25 Plant25_data;
Plant26 Plant26_data;
Plant27 Plant27_data;
Plant28 Plant28_data;
Plant29 Plant29_data;
Plant30 Plant30_data;

int main(void) {
	(void) memset((void *)&Controller1_data, 0, sizeof(Controller1));
	Controller1Init(&Controller1_data);

	(void) memset((void *)&Controller2_data, 0, sizeof(Controller2));
	Controller2Init(&Controller2_data);

	(void) memset((void *)&Controller3_data, 0, sizeof(Controller3));
	Controller3Init(&Controller3_data);

	(void) memset((void *)&Controller4_data, 0, sizeof(Controller4));
	Controller4Init(&Controller4_data);

	(void) memset((void *)&Controller5_data, 0, sizeof(Controller5));
	Controller5Init(&Controller5_data);

	(void) memset((void *)&Controller6_data, 0, sizeof(Controller6));
	Controller6Init(&Controller6_data);

	(void) memset((void *)&Controller7_data, 0, sizeof(Controller7));
	Controller7Init(&Controller7_data);

	(void) memset((void *)&Controller8_data, 0, sizeof(Controller8));
	Controller8Init(&Controller8_data);

	(void) memset((void *)&Controller9_data, 0, sizeof(Controller9));
	Controller9Init(&Controller9_data);

	(void) memset((void *)&Controller10_data, 0, sizeof(Controller10));
	Controller10Init(&Controller10_data);

	(void) memset((void *)&Controller11_data, 0, sizeof(Controller11));
	Controller11Init(&Controller11_data);

	(void) memset((void *)&Controller12_data, 0, sizeof(Controller12));
	Controller12Init(&Controller12_data);

	(void) memset((void *)&Controller13_data, 0, sizeof(Controller13));
	Controller13Init(&Controller13_data);

	(void) memset((void *)&Controller14_data, 0, sizeof(Controller14));
	Controller14Init(&Controller14_data);

	(void) memset((void *)&Controller15_data, 0, sizeof(Controller15));
	Controller15Init(&Controller15_data);

	(void) memset((void *)&Controller16_data, 0, sizeof(Controller16));
	Controller16Init(&Controller16_data);

	(void) memset((void *)&Controller17_data, 0, sizeof(Controller17));
	Controller17Init(&Controller17_data);

	(void) memset((void *)&Controller18_data, 0, sizeof(Controller18));
	Controller18Init(&Controller18_data);

	(void) memset((void *)&Controller19_data, 0, sizeof(Controller19));
	Controller19Init(&Controller19_data);

	(void) memset((void *)&Controller20_data, 0, sizeof(Controller20));
	Controller20Init(&Controller20_data);

	(void) memset((void *)&Controller21_data, 0, sizeof(Controller21));
	Controller21Init(&Controller21_data);

	(void) memset((void *)&Controller22_data, 0, sizeof(Controller22));
	Controller22Init(&Controller22_data);

	(void) memset((void *)&Controller23_data, 0, sizeof(Controller23));
	Controller23Init(&Controller23_data);

	(void) memset((void *)&Controller24_data, 0, sizeof(Controller24));
	Controller24Init(&Controller24_data);

	(void) memset((void *)&Controller25_data, 0, sizeof(Controller25));
	Controller25Init(&Controller25_data);

	(void) memset((void *)&Controller26_data, 0, sizeof(Controller26));
	Controller26Init(&Controller26_data);

	(void) memset((void *)&Controller27_data, 0, sizeof(Controller27));
	Controller27Init(&Controller27_data);

	(void) memset((void *)&Controller28_data, 0, sizeof(Controller28));
	Controller28Init(&Controller28_data);

	(void) memset((void *)&Controller29_data, 0, sizeof(Controller29));
	Controller29Init(&Controller29_data);

	(void) memset((void *)&Controller30_data, 0, sizeof(Controller30));
	Controller30Init(&Controller30_data);

	(void) memset((void *)&Plant1_data, 0, sizeof(Plant1));
	Plant1Init(&Plant1_data);

	(void) memset((void *)&Plant2_data, 0, sizeof(Plant2));
	Plant2Init(&Plant2_data);

	(void) memset((void *)&Plant3_data, 0, sizeof(Plant3));
	Plant3Init(&Plant3_data);

	(void) memset((void *)&Plant4_data, 0, sizeof(Plant4));
	Plant4Init(&Plant4_data);

	(void) memset((void *)&Plant5_data, 0, sizeof(Plant5));
	Plant5Init(&Plant5_data);

	(void) memset((void *)&Plant6_data, 0, sizeof(Plant6));
	Plant6Init(&Plant6_data);

	(void) memset((void *)&Plant7_data, 0, sizeof(Plant7));
	Plant7Init(&Plant7_data);

	(void) memset((void *)&Plant8_data, 0, sizeof(Plant8));
	Plant8Init(&Plant8_data);

	(void) memset((void *)&Plant9_data, 0, sizeof(Plant9));
	Plant9Init(&Plant9_data);

	(void) memset((void *)&Plant10_data, 0, sizeof(Plant10));
	Plant10Init(&Plant10_data);

	(void) memset((void *)&Plant11_data, 0, sizeof(Plant11));
	Plant11Init(&Plant11_data);

	(void) memset((void *)&Plant12_data, 0, sizeof(Plant12));
	Plant12Init(&Plant12_data);

	(void) memset((void *)&Plant13_data, 0, sizeof(Plant13));
	Plant13Init(&Plant13_data);

	(void) memset((void *)&Plant14_data, 0, sizeof(Plant14));
	Plant14Init(&Plant14_data);

	(void) memset((void *)&Plant15_data, 0, sizeof(Plant15));
	Plant15Init(&Plant15_data);

	(void) memset((void *)&Plant16_data, 0, sizeof(Plant16));
	Plant16Init(&Plant16_data);

	(void) memset((void *)&Plant17_data, 0, sizeof(Plant17));
	Plant17Init(&Plant17_data);

	(void) memset((void *)&Plant18_data, 0, sizeof(Plant18));
	Plant18Init(&Plant18_data);

	(void) memset((void *)&Plant19_data, 0, sizeof(Plant19));
	Plant19Init(&Plant19_data);

	(void) memset((void *)&Plant20_data, 0, sizeof(Plant20));
	Plant20Init(&Plant20_data);

	(void) memset((void *)&Plant21_data, 0, sizeof(Plant21));
	Plant21Init(&Plant21_data);

	(void) memset((void *)&Plant22_data, 0, sizeof(Plant22));
	Plant22Init(&Plant22_data);

	(void) memset((void *)&Plant23_data, 0, sizeof(Plant23));
	Plant23Init(&Plant23_data);

	(void) memset((void *)&Plant24_data, 0, sizeof(Plant24));
	Plant24Init(&Plant24_data);

	(void) memset((void *)&Plant25_data, 0, sizeof(Plant25));
	Plant25Init(&Plant25_data);

	(void) memset((void *)&Plant26_data, 0, sizeof(Plant26));
	Plant26Init(&Plant26_data);

	(void) memset((void *)&Plant27_data, 0, sizeof(Plant27));
	Plant27Init(&Plant27_data);

	(void) memset((void *)&Plant28_data, 0, sizeof(Plant28));
	Plant28Init(&Plant28_data);

	(void) memset((void *)&Plant29_data, 0, sizeof(Plant29));
	Plant29Init(&Plant29_data);

	(void) memset((void *)&Plant30_data, 0, sizeof(Plant30));
	Plant30Init(&Plant30_data);

	FILE* fo = fopen("out.csv", "w");

	struct timeval t0, t1;
	gettimeofday(&t0, 0);

	unsigned int i = 0;
	for(i=0; i < (SIMULATION_TIME / STEP_SIZE); i++) {
		//fprintf(stdout, "Time: %fms\n", i*STEP_SIZE);
		//fflush(stdout);

Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


Plant1_data.control = Controller1_data.control;
Controller1_data.x = Plant1_data.x;


		Controller1Run(&Controller1_data);

		Controller2Run(&Controller2_data);

		Controller3Run(&Controller3_data);

		Controller4Run(&Controller4_data);

		Controller5Run(&Controller5_data);

		Controller6Run(&Controller6_data);

		Controller7Run(&Controller7_data);

		Controller8Run(&Controller8_data);

		Controller9Run(&Controller9_data);

		Controller10Run(&Controller10_data);

		Controller11Run(&Controller11_data);

		Controller12Run(&Controller12_data);

		Controller13Run(&Controller13_data);

		Controller14Run(&Controller14_data);

		Controller15Run(&Controller15_data);

		Controller16Run(&Controller16_data);

		Controller17Run(&Controller17_data);

		Controller18Run(&Controller18_data);

		Controller19Run(&Controller19_data);

		Controller20Run(&Controller20_data);

		Controller21Run(&Controller21_data);

		Controller22Run(&Controller22_data);

		Controller23Run(&Controller23_data);

		Controller24Run(&Controller24_data);

		Controller25Run(&Controller25_data);

		Controller26Run(&Controller26_data);

		Controller27Run(&Controller27_data);

		Controller28Run(&Controller28_data);

		Controller29Run(&Controller29_data);

		Controller30Run(&Controller30_data);

		Plant1Run(&Plant1_data);

		Plant2Run(&Plant2_data);

		Plant3Run(&Plant3_data);

		Plant4Run(&Plant4_data);

		Plant5Run(&Plant5_data);

		Plant6Run(&Plant6_data);

		Plant7Run(&Plant7_data);

		Plant8Run(&Plant8_data);

		Plant9Run(&Plant9_data);

		Plant10Run(&Plant10_data);

		Plant11Run(&Plant11_data);

		Plant12Run(&Plant12_data);

		Plant13Run(&Plant13_data);

		Plant14Run(&Plant14_data);

		Plant15Run(&Plant15_data);

		Plant16Run(&Plant16_data);

		Plant17Run(&Plant17_data);

		Plant18Run(&Plant18_data);

		Plant19Run(&Plant19_data);

		Plant20Run(&Plant20_data);

		Plant21Run(&Plant21_data);

		Plant22Run(&Plant22_data);

		Plant23Run(&Plant23_data);

		Plant24Run(&Plant24_data);

		Plant25Run(&Plant25_data);

		Plant26Run(&Plant26_data);

		Plant27Run(&Plant27_data);

		Plant28Run(&Plant28_data);

		Plant29Run(&Plant29_data);

		Plant30Run(&Plant30_data);
	}

	gettimeofday(&t1, 0);
	long elapsed = (t1.tv_sec-t0.tv_sec)*1000000 + t1.tv_usec-t0.tv_usec;

	printf("Time taken: %ld microseconds (%.3f seconds)\n", elapsed, (elapsed / 1000000.0));

	fclose(fo);

	return 0;
}
