#include <stdint.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/time.h>

#include "Generic/step.h"
#include "Thermostats/Generated/Thermostat1.h"
#include "Thermostats/Generated/Thermostat2.h"
#include "Thermostats/Generated/Thermostat3.h"
#include "Thermostats/Generated/Thermostat4.h"
#include "Thermostats/Generated/Thermostat5.h"
#include "Thermostats/Generated/Thermostat6.h"
#include "Thermostats/Generated/Thermostat7.h"
#include "Thermostats/Generated/Thermostat8.h"
#include "Thermostats/Generated/Thermostat9.h"
#include "Thermostats/Generated/Thermostat10.h"
#include "Thermostats/Generated/Thermostat11.h"
#include "Thermostats/Generated/Thermostat12.h"
#include "Thermostats/Generated/Thermostat13.h"
#include "Thermostats/Generated/Thermostat14.h"
#include "Thermostats/Generated/Thermostat15.h"
#include "Thermostats/Generated/Thermostat16.h"
#include "Thermostats/Generated/Thermostat17.h"
#include "Thermostats/Generated/Thermostat18.h"
#include "Thermostats/Generated/Thermostat19.h"
#include "Thermostats/Generated/Thermostat20.h"
#include "Thermostats/Generated/Thermostat21.h"
#include "Thermostats/Generated/Thermostat22.h"
#include "Thermostats/Generated/Thermostat23.h"
#include "Thermostats/Generated/Thermostat24.h"
#include "Thermostats/Generated/Thermostat25.h"
#include "Thermostats/Generated/Thermostat26.h"
#include "Thermostats/Generated/Thermostat27.h"
#include "Thermostats/Generated/Thermostat28.h"
#include "Thermostats/Generated/Thermostat29.h"
#include "Thermostats/Generated/Thermostat30.h"
#include "Thermostats/Generated/Thermostat31.h"
#include "Thermostats/Generated/Thermostat32.h"
#include "Thermostats/Generated/Thermostat33.h"
#include "Thermostats/Generated/Thermostat34.h"
#include "Thermostats/Generated/Thermostat35.h"
#include "Thermostats/Generated/Thermostat36.h"
#include "Thermostats/Generated/Thermostat37.h"
#include "Thermostats/Generated/Thermostat38.h"
#include "Thermostats/Generated/Thermostat39.h"
#include "Thermostats/Generated/Thermostat40.h"
#include "Thermostats/Generated/Thermostat41.h"
#include "Thermostats/Generated/Thermostat42.h"
#include "Thermostats/Generated/Thermostat43.h"
#include "Thermostats/Generated/Thermostat44.h"
#include "Thermostats/Generated/Thermostat45.h"
#include "Thermostats/Generated/Thermostat46.h"
#include "Thermostats/Generated/Thermostat47.h"
#include "Thermostats/Generated/Thermostat48.h"
#include "Thermostats/Generated/Thermostat49.h"
#include "Thermostats/Generated/Thermostat50.h"

Thermostat1 Thermostat1_data;
Thermostat2 Thermostat2_data;
Thermostat3 Thermostat3_data;
Thermostat4 Thermostat4_data;
Thermostat5 Thermostat5_data;
Thermostat6 Thermostat6_data;
Thermostat7 Thermostat7_data;
Thermostat8 Thermostat8_data;
Thermostat9 Thermostat9_data;
Thermostat10 Thermostat10_data;
Thermostat11 Thermostat11_data;
Thermostat12 Thermostat12_data;
Thermostat13 Thermostat13_data;
Thermostat14 Thermostat14_data;
Thermostat15 Thermostat15_data;
Thermostat16 Thermostat16_data;
Thermostat17 Thermostat17_data;
Thermostat18 Thermostat18_data;
Thermostat19 Thermostat19_data;
Thermostat20 Thermostat20_data;
Thermostat21 Thermostat21_data;
Thermostat22 Thermostat22_data;
Thermostat23 Thermostat23_data;
Thermostat24 Thermostat24_data;
Thermostat25 Thermostat25_data;
Thermostat26 Thermostat26_data;
Thermostat27 Thermostat27_data;
Thermostat28 Thermostat28_data;
Thermostat29 Thermostat29_data;
Thermostat30 Thermostat30_data;
Thermostat31 Thermostat31_data;
Thermostat32 Thermostat32_data;
Thermostat33 Thermostat33_data;
Thermostat34 Thermostat34_data;
Thermostat35 Thermostat35_data;
Thermostat36 Thermostat36_data;
Thermostat37 Thermostat37_data;
Thermostat38 Thermostat38_data;
Thermostat39 Thermostat39_data;
Thermostat40 Thermostat40_data;
Thermostat41 Thermostat41_data;
Thermostat42 Thermostat42_data;
Thermostat43 Thermostat43_data;
Thermostat44 Thermostat44_data;
Thermostat45 Thermostat45_data;
Thermostat46 Thermostat46_data;
Thermostat47 Thermostat47_data;
Thermostat48 Thermostat48_data;
Thermostat49 Thermostat49_data;
Thermostat50 Thermostat50_data;

int main(void) {
	(void) memset((void *)&Thermostat1_data, 0, sizeof(Thermostat1));
	Thermostat1Init(&Thermostat1_data);

	(void) memset((void *)&Thermostat2_data, 0, sizeof(Thermostat2));
	Thermostat2Init(&Thermostat2_data);

	(void) memset((void *)&Thermostat3_data, 0, sizeof(Thermostat3));
	Thermostat3Init(&Thermostat3_data);

	(void) memset((void *)&Thermostat4_data, 0, sizeof(Thermostat4));
	Thermostat4Init(&Thermostat4_data);

	(void) memset((void *)&Thermostat5_data, 0, sizeof(Thermostat5));
	Thermostat5Init(&Thermostat5_data);

	(void) memset((void *)&Thermostat6_data, 0, sizeof(Thermostat6));
	Thermostat6Init(&Thermostat6_data);

	(void) memset((void *)&Thermostat7_data, 0, sizeof(Thermostat7));
	Thermostat7Init(&Thermostat7_data);

	(void) memset((void *)&Thermostat8_data, 0, sizeof(Thermostat8));
	Thermostat8Init(&Thermostat8_data);

	(void) memset((void *)&Thermostat9_data, 0, sizeof(Thermostat9));
	Thermostat9Init(&Thermostat9_data);

	(void) memset((void *)&Thermostat10_data, 0, sizeof(Thermostat10));
	Thermostat10Init(&Thermostat10_data);

	(void) memset((void *)&Thermostat11_data, 0, sizeof(Thermostat11));
	Thermostat11Init(&Thermostat11_data);

	(void) memset((void *)&Thermostat12_data, 0, sizeof(Thermostat12));
	Thermostat12Init(&Thermostat12_data);

	(void) memset((void *)&Thermostat13_data, 0, sizeof(Thermostat13));
	Thermostat13Init(&Thermostat13_data);

	(void) memset((void *)&Thermostat14_data, 0, sizeof(Thermostat14));
	Thermostat14Init(&Thermostat14_data);

	(void) memset((void *)&Thermostat15_data, 0, sizeof(Thermostat15));
	Thermostat15Init(&Thermostat15_data);

	(void) memset((void *)&Thermostat16_data, 0, sizeof(Thermostat16));
	Thermostat16Init(&Thermostat16_data);

	(void) memset((void *)&Thermostat17_data, 0, sizeof(Thermostat17));
	Thermostat17Init(&Thermostat17_data);

	(void) memset((void *)&Thermostat18_data, 0, sizeof(Thermostat18));
	Thermostat18Init(&Thermostat18_data);

	(void) memset((void *)&Thermostat19_data, 0, sizeof(Thermostat19));
	Thermostat19Init(&Thermostat19_data);

	(void) memset((void *)&Thermostat20_data, 0, sizeof(Thermostat20));
	Thermostat20Init(&Thermostat20_data);

	(void) memset((void *)&Thermostat21_data, 0, sizeof(Thermostat21));
	Thermostat21Init(&Thermostat21_data);

	(void) memset((void *)&Thermostat22_data, 0, sizeof(Thermostat22));
	Thermostat22Init(&Thermostat22_data);

	(void) memset((void *)&Thermostat23_data, 0, sizeof(Thermostat23));
	Thermostat23Init(&Thermostat23_data);

	(void) memset((void *)&Thermostat24_data, 0, sizeof(Thermostat24));
	Thermostat24Init(&Thermostat24_data);

	(void) memset((void *)&Thermostat25_data, 0, sizeof(Thermostat25));
	Thermostat25Init(&Thermostat25_data);

	(void) memset((void *)&Thermostat26_data, 0, sizeof(Thermostat26));
	Thermostat26Init(&Thermostat26_data);

	(void) memset((void *)&Thermostat27_data, 0, sizeof(Thermostat27));
	Thermostat27Init(&Thermostat27_data);

	(void) memset((void *)&Thermostat28_data, 0, sizeof(Thermostat28));
	Thermostat28Init(&Thermostat28_data);

	(void) memset((void *)&Thermostat29_data, 0, sizeof(Thermostat29));
	Thermostat29Init(&Thermostat29_data);

	(void) memset((void *)&Thermostat30_data, 0, sizeof(Thermostat30));
	Thermostat30Init(&Thermostat30_data);

	(void) memset((void *)&Thermostat31_data, 0, sizeof(Thermostat31));
	Thermostat31Init(&Thermostat31_data);

	(void) memset((void *)&Thermostat32_data, 0, sizeof(Thermostat32));
	Thermostat32Init(&Thermostat32_data);

	(void) memset((void *)&Thermostat33_data, 0, sizeof(Thermostat33));
	Thermostat33Init(&Thermostat33_data);

	(void) memset((void *)&Thermostat34_data, 0, sizeof(Thermostat34));
	Thermostat34Init(&Thermostat34_data);

	(void) memset((void *)&Thermostat35_data, 0, sizeof(Thermostat35));
	Thermostat35Init(&Thermostat35_data);

	(void) memset((void *)&Thermostat36_data, 0, sizeof(Thermostat36));
	Thermostat36Init(&Thermostat36_data);

	(void) memset((void *)&Thermostat37_data, 0, sizeof(Thermostat37));
	Thermostat37Init(&Thermostat37_data);

	(void) memset((void *)&Thermostat38_data, 0, sizeof(Thermostat38));
	Thermostat38Init(&Thermostat38_data);

	(void) memset((void *)&Thermostat39_data, 0, sizeof(Thermostat39));
	Thermostat39Init(&Thermostat39_data);

	(void) memset((void *)&Thermostat40_data, 0, sizeof(Thermostat40));
	Thermostat40Init(&Thermostat40_data);

	(void) memset((void *)&Thermostat41_data, 0, sizeof(Thermostat41));
	Thermostat41Init(&Thermostat41_data);

	(void) memset((void *)&Thermostat42_data, 0, sizeof(Thermostat42));
	Thermostat42Init(&Thermostat42_data);

	(void) memset((void *)&Thermostat43_data, 0, sizeof(Thermostat43));
	Thermostat43Init(&Thermostat43_data);

	(void) memset((void *)&Thermostat44_data, 0, sizeof(Thermostat44));
	Thermostat44Init(&Thermostat44_data);

	(void) memset((void *)&Thermostat45_data, 0, sizeof(Thermostat45));
	Thermostat45Init(&Thermostat45_data);

	(void) memset((void *)&Thermostat46_data, 0, sizeof(Thermostat46));
	Thermostat46Init(&Thermostat46_data);

	(void) memset((void *)&Thermostat47_data, 0, sizeof(Thermostat47));
	Thermostat47Init(&Thermostat47_data);

	(void) memset((void *)&Thermostat48_data, 0, sizeof(Thermostat48));
	Thermostat48Init(&Thermostat48_data);

	(void) memset((void *)&Thermostat49_data, 0, sizeof(Thermostat49));
	Thermostat49Init(&Thermostat49_data);

	(void) memset((void *)&Thermostat50_data, 0, sizeof(Thermostat50));
	Thermostat50Init(&Thermostat50_data);

	FILE* fo = fopen("out.csv", "w");

	struct timeval t0, t1;
	gettimeofday(&t0, 0);

	unsigned int i = 0;
	for(i=0; i < (SIMULATION_TIME / STEP_SIZE); i++) {
		//fprintf(stdout, "Time: %fms\n", i*STEP_SIZE);
		//fflush(stdout);

//fprintf(fo, "%f, %f\n", i*STEP_SIZE, Thermostat1_data.t);
//fflush(fo);

		Thermostat1Run(&Thermostat1_data);

		Thermostat2Run(&Thermostat2_data);

		Thermostat3Run(&Thermostat3_data);

		Thermostat4Run(&Thermostat4_data);

		Thermostat5Run(&Thermostat5_data);

		Thermostat6Run(&Thermostat6_data);

		Thermostat7Run(&Thermostat7_data);

		Thermostat8Run(&Thermostat8_data);

		Thermostat9Run(&Thermostat9_data);

		Thermostat10Run(&Thermostat10_data);

		Thermostat11Run(&Thermostat11_data);

		Thermostat12Run(&Thermostat12_data);

		Thermostat13Run(&Thermostat13_data);

		Thermostat14Run(&Thermostat14_data);

		Thermostat15Run(&Thermostat15_data);

		Thermostat16Run(&Thermostat16_data);

		Thermostat17Run(&Thermostat17_data);

		Thermostat18Run(&Thermostat18_data);

		Thermostat19Run(&Thermostat19_data);

		Thermostat20Run(&Thermostat20_data);

		Thermostat21Run(&Thermostat21_data);

		Thermostat22Run(&Thermostat22_data);

		Thermostat23Run(&Thermostat23_data);

		Thermostat24Run(&Thermostat24_data);

		Thermostat25Run(&Thermostat25_data);

		Thermostat26Run(&Thermostat26_data);

		Thermostat27Run(&Thermostat27_data);

		Thermostat28Run(&Thermostat28_data);

		Thermostat29Run(&Thermostat29_data);

		Thermostat30Run(&Thermostat30_data);

		Thermostat31Run(&Thermostat31_data);

		Thermostat32Run(&Thermostat32_data);

		Thermostat33Run(&Thermostat33_data);

		Thermostat34Run(&Thermostat34_data);

		Thermostat35Run(&Thermostat35_data);

		Thermostat36Run(&Thermostat36_data);

		Thermostat37Run(&Thermostat37_data);

		Thermostat38Run(&Thermostat38_data);

		Thermostat39Run(&Thermostat39_data);

		Thermostat40Run(&Thermostat40_data);

		Thermostat41Run(&Thermostat41_data);

		Thermostat42Run(&Thermostat42_data);

		Thermostat43Run(&Thermostat43_data);

		Thermostat44Run(&Thermostat44_data);

		Thermostat45Run(&Thermostat45_data);

		Thermostat46Run(&Thermostat46_data);

		Thermostat47Run(&Thermostat47_data);

		Thermostat48Run(&Thermostat48_data);

		Thermostat49Run(&Thermostat49_data);

		Thermostat50Run(&Thermostat50_data);
	}

	gettimeofday(&t1, 0);
	long elapsed = (t1.tv_sec-t0.tv_sec)*1000000 + t1.tv_usec-t0.tv_usec;

	printf("Time taken: %ld microseconds (%.3f seconds)\n", elapsed, (elapsed / 1000000.0));

	fclose(fo);

	return 0;
}
