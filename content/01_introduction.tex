\section{Introduction}

Numerous cases of death and injuries due to malfunction of 
cyber-physical devices such as  pacemakers have been reported.
In 1990-2000, close to 200,000 pacemakers have been recalled
due to software related failures~\cite{alemzadeh13}.
 One reason that these malfunctions
arise is due to the lack of proper validation.
Unlike the ideas of hardware-in-the-loop testing [ref],
it is not possible to test on actual heart.
Further, unlike the hardware that is almost identical 
during mass production, each individual heart is different.
Thus there is a need to develop a virtual heart that is tailored
to an individual person and achieves
 personalised healthcare~\cite{Trayanova2014}. This idea can be extended 
to a network of human organs, resulting in a virtual human.

Typically these biological  models are  developed by biomedical engineers.
They mimic the heart's working at the
molecular level~\cite{Trayanova2014}. 
To simulate one heart beat takes severely hours, if not days~[].
These models are very computationally intensive and 
are not for real-time emulation,
which is required for closed-loop testing of time-critical 
controllers such as cardiac pacemakers.
Further, the models are 
 very precise resulting in sophisticated models that 
 are not amenable for  formal verification. 
Thus, there is a need to develop abstract models 
by computer systems engineers that  
(1)  \emph{capture the behaviour} of the heart (plant) 
from a pacemaker's (controller's) point of view,
allows for (2) \emph{real-time emulation} of the heart 
such that it is possible for closed-loop simulation and
is amenable for (3) \emph{formal verification} of 
functional and timing properties.


The continuous dynamics of a plant (e.g., heart) and
 the discrete behaviour of a controller (e.g., pacemaker) 
 results in so called hybrid systems. 
 These are often formally described using Hybrid Automata~\cite{alur2015principles,raskin05,chen201487}.
 However, these are non-deterministic and are problematic
 for generating constructive models.
 A more abstract deterministic model will enable us to
 develop constructive/synthesisable models~\cite{Lee2014}. Also, 
 it is easier to draw trusted conclusions from simulations
 of deterministic models. Based on the
 well-known synchronous approach~[], 
 we present a deterministic semantics for \ac{HA} and show
 constructive models in this paper.

 
 \textbf{Contributions} of this paper are 
 (1) We propose a \emph{deterministic semantics} for \acf{HA}, see Section~\ref{sec:HA}.
 (2) A \emph{scalable modular code generation} approach 
 to aid real-time emulation of a plant, see Section~\ref{sec:codeGen}.
  (3) We quantitatively evaluate the efficacy of the 
  proposed approach by comparing  
   to the widely used Simulink\textsuperscript{\textregistered}
   simulation framework, see Section~\ref{sec:benchmarking}.
   
 An overview of the proposed approach is presented
 in Figure~\ref{fig:overview}.
 
 \begin{figure}[bthp]
 	\centering
 	\scalebox{0.7}{
	 \input{./figures/approachOverview}
	}
	 \caption{Overview of the proposed solution 
	 	[NEEDS TO BE UPDATED] \label{fig:overview}}
\end{figure}
      
 
 
